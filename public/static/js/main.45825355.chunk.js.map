{"version":3,"sources":["images/Vector.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","utils/formHelper.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/Spinner.js","utils/constants.js","utils/GiphyApi.js","components/Page404.js","utils/Api.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","className","src","logo","alt","CurrentUserContext","React","createContext","Card","onCardClick","onCardLike","onCardDelete","card","name","link","likes","currentUser","useContext","isOwn","owner","_id","useState","counterAnimation","setCounterAnimation","cardDeleteButtonClassName","isLiked","some","like","cardLikeButtonClass","likeCounterClass","onClick","setTimeout","type","length","Main","cards","cardClick","onAddPlace","onEditProfile","onEditAvatar","onDeletePopup","about","avatar","map","key","Footer","ImagePopup","props","onClose","PopupWithForm","buttonTitle","children","title","isOpen","onSubmit","isDisabled","renderSubmitAnimation","reducerForForm","state","initialFormValueState","field","value","updateValues","inputValues","updatedValidities","inputValidities","validity","valid","updateErrors","inputErrors","validationMessage","formIsValid","keyValue","replace","formValid","nameValidity","aboutValidity","nameError","aboutError","reducerForEditProfileForms","action","Object","assign","EditProfilePopup","onUpdateUser","isSubmitting","currentUserValue","useReducer","formState","dispatchForm","buttonState","handleChange","e","target","useEffect","preventDefault","reset","id","placeholder","minLength","maxLength","pattern","required","onChange","EditAvatarPopup","onUpdateAvatar","avatarInput","useRef","avatarValidity","setAvatarValidity","setDisable","avatarErrorMessage","setAvatarErrorMessage","current","handleSubmit","ref","linkValidity","linkError","reducerForAddPlaceForm","AddPlacePopup","buttonDisabled","ConfirmDeletePopup","onDeleteSubmit","Spinner","urlPath","giphy","baseUrl","this","_url","fetch","then","res","ok","json","Promise","reject","Error","status","Page404","gif","setGif","randomGifRequest","fetchData","data","embed_url","catch","err","console","log","allowFullScreen","to","api","headers","_headers","path","params","_fetchData","method","body","JSON","stringify","authorization","App","setUserInfo","setCards","setSubmiting","isLoading","setLoading","isEditProfileOpen","setEditProfilePopup","isAddPlacePopupOpen","setAddPlacePopup","isEditAvatarPopupOpen","setEditAvatarPopup","isDeletePopupOpen","setDeletePopup","undefined","selectedCard","setSelectedCardPopup","selectedDeleteCard","setSelectedCard","handleEsc","useCallback","closeAllPopups","popupStates","el","window","addEventListener","removeEventListener","all","getUserInfo","getInitialCards","userData","initialCards","handleDeleteCard","deleteCard","newCards","filter","i","Provider","exact","setLike","newCard","c","updateUserInfo","result","updateUserAvatar","postNewCard","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.45825355.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Vector.c6f11019.svg\";","import React from \"react\";\nimport logo from \"../images/Vector.svg\";\n\n/**\n * Header component\n * @return {JSX.Element}\n */\nfunction Header() {\n\n        return (\n            <header className=\"header\">\n                <img className=\"header__logo\" src={logo} alt=\"Логотип\"/>\n            </header>\n        )\n\n}\n\nexport default Header","import React from 'react';\n/**\ncontext for current user\n */\n\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\n\n/**\n * card component\n * @param {object} prorps component props\n * @param {function} props.onCardClick handles click on card and opens modal window with card image\n * @param {function} props.onCardLike  handles click on like, toggles like and setting new like count\n * @param {function} props.onCardDelete  handles card delete\n * @param {Object} props.card card object\n * @returns {JSX.Element} Component Template\n */\nfunction Card ({onCardClick, onCardLike, onCardDelete, card}) {\n    /**\n     * destructured card prop\n     */\n    const {name = '', link = '', likes = []} = card;\n\n    /**\n     * Current user context\n     * @type {objec}\n     */\n\n    const currentUser = React.useContext(CurrentUserContext);\n    /**\n     * checks if card owner id corresponds with user id\n     * @type {boolean}\n     */\n    const isOwn = card.owner._id === currentUser._id;\n\n    /**\n     * state for an like counter animation\n     */\n    const [counterAnimation, setCounterAnimation] = React.useState(false);\n\n    /**\n     * class for a delete button\n     * @type {string}\n     */\n    const cardDeleteButtonClassName = (\n        `card__delete-button ${isOwn ? 'card__delete-button_visible' : 'card__delete-button_hidden'}`\n    );\n\n    /**\n     * checks if user liked a card\n     * @type {boolean}\n     */\n    const isLiked = likes.some((like) => like._id === currentUser._id);\n\n    /**\n     * card like button class\n     * @type {string}\n     */\n    const cardLikeButtonClass = (`card__like ${isLiked ? 'card__like_active' : null}`);\n\n    /**\n     * card like counter class\n     * @type {string}\n     */\n    const likeCounterClass = (`card__like-counter ${counterAnimation ? 'card__like-counter_animation' : null}`)\n\n    /**\n     * @method handleCardClick\n     * @description handles click on a card\n     */\n    const handleCardClick = () => {\n        onCardClick(card);\n    };\n\n    /**\n     * @method handleLikeClick\n     * @description handles click on like and sets and removes counter animation\n     */\n    const handleLikeClick = () => {\n        setCounterAnimation(true);\n        setTimeout(() => {\n            setCounterAnimation(false);\n        },500);\n        onCardLike(card);\n    };\n\n    /**\n     * @method handleDeleteCard\n     * @description handles card delete\n     */\n    const handleDeleteCard = () => {\n        onCardDelete(card);\n    };\n\n        return (\n            <li className=\"card\">\n                <img\n                    className=\"card__photo\"\n                    alt={name}\n                    src={link}\n                    onClick={handleCardClick}\n                />\n                <button className={cardDeleteButtonClassName} onClick={handleDeleteCard}/>\n                <div className=\"card__info-container\">\n                    <h2 className=\"card__title\">{name}</h2>\n                    <div className=\"card__like-container\">\n                        <button className={cardLikeButtonClass} onClick={handleLikeClick} type=\"button\"/>\n                        <p className={likeCounterClass}>{likes.length}</p>\n                    </div>\n                </div>\n            </li>\n        )\n}\n\nexport default Card","import React from \"react\";\nimport Card from \"./Card\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\n/**\n * main component\n * @param {object} props\n * @param {function} props.onEditAvatar - handles click on avatar and opens edit avatar popup\n * @param {function} props.onEditProfile - handles click on profile button and opens edit profile popup\n * @param {function} props.onAddPlace - handles click on addPlace button and opens add place popup\n * @param {function} props.cardClick - handles click on card image and opens image popup\n */\nfunction Main ({cards, cardClick, onAddPlace, onEditProfile, onEditAvatar, onCardLike, onDeletePopup}) {\n    /**\n     * current user context\n     * @type {object}\n     */\n    const currentUser = React.useContext(CurrentUserContext);\n    const {name, about, avatar} = currentUser;\n\n        return (\n            <main className=\"content\">\n\n                <section className=\"profile\">\n                    <div className=\"profile__wrap\">\n                        <div className=\"profile__avatar\"  onClick={onEditAvatar}>\n                            <img className=\"profile__avatar-image\" alt=\"Аватар\" src={avatar}/>\n                        </div>\n                        <div className=\"profile__info\">\n                            <div className=\"profile__text-container\">\n                                <h2 className=\"profile__title\">{name}</h2>\n                                <button className=\"profile__edit-button\" type=\"button\" onClick={onEditProfile}/>\n                            </div>\n                            <p className=\"profile__subtitle\">{about}</p>\n                        </div>\n                    </div>\n                    <button className=\"profile__add-button\" type=\"button\" onClick={onAddPlace}/>\n                </section>\n\n                    <ul className=\"cards\">\n                    {cards.map((card) => <Card card={card} key={card._id} onCardClick={cardClick} onCardLike={onCardLike} onCardDelete={onDeletePopup}/>)}\n                </ul>\n\n            </main>\n        )\n\n}\n\nexport default Main","import React from \"react\";\n\n/**\n * footer component\n * @return {JSX.Element}\n * @constructor\n */\nfunction Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__title\">\n                &copy; 2020 Mesto Russia\n            </p>\n        </footer>\n    )\n}\n\nexport default Footer","import React from \"react\";\n\n/**\n * popup with image component\n * @param {Object} props\n * @param {Object} props.card - card object\n * @param {function} onClose - handler for closing popup\n * @return {JSX.Element}\n */\nfunction ImagePopup(props) {\n    const {\n        card,\n        card: {link, name} = {link: '', name: ''},\n        onClose,\n    } = props;\n    return (\n        <div className={`popup popup_type_image ${card ? 'popup_opened' : null}`}>\n            <figure className=\"popup__image-container\">\n                <button className=\"popup__button-close\" type=\"button\" onClick={onClose}/>\n                <img className=\"popup__photo\" src={link} alt={name}/>\n                <figcaption className=\"popup__caption\">{name}</figcaption>\n            </figure>\n            <div className=\"popup__overlay popup__overlay_image\" onClick={onClose}/>\n        </div>\n    )\n}\n\nexport default ImagePopup","import React from \"react\";\n\n/**\n * popup with form component\n * @property {Object} props\n * @property {string} props.buttonTitle - title of the submit button\n * @property {string} name - name for a popup class type\n * @property {string} title - title for a popup\n * @property {function} onClose - handler for closing popup\n * @property {Boolean} isOpen - popup state\n */\nfunction PopupWithForm({buttonTitle, children, name, title,\n                           onClose, isOpen, onSubmit, isDisabled,\n                           renderSubmitAnimation\n}){\n\n    return (\n        <div className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : null}`}>\n            <div className=\"popup__container\">\n                <h2 className=\"popup__title\">{title}</h2>\n                <button className=\"popup__button-close\" onClick={onClose} type=\"button\"/>\n                <form className=\"popup__form\" name={name} onSubmit={onSubmit}>\n                    {children}\n                    <button className={`popup__button-submit popup__button-submit_action \n                    ${renderSubmitAnimation ? 'popup__button-submit_loading' : null}\n                    ${isDisabled ? null : 'popup__button-submit_disabled'}`\n                    }\n                            type=\"submit\">{buttonTitle}</button>\n                </form>\n            </div>\n            <div className=\"popup__overlay\" onClick={onClose}/>\n        </div>\n    )\n}\n\nexport default PopupWithForm","/**\n * helper function for a reducer to validate and dispatch values\n * @param state  state\n * @param action\n * @param action.field field name\n * @param action.type action type\n * @param action.value field value\n * @param initialFormValueState initial values\n * @returns {object} changed state\n */\n\nexport const reducerForForm = (state, {field, type, value}, initialFormValueState) => {\n    switch (type) {\n        case 'DISPATCH':\n            const updateValues = {\n                ...state.inputValues,\n                [field]: value.value,\n            }\n            const updatedValidities = {\n                ...state.inputValidities,\n                [`${field}Validity`]: value.validity.valid,\n            };\n            const updateErrors = {\n                ...state.inputErrors,\n                [`${field}Error`]: value.validationMessage\n            };\n            let formIsValid = true;\n            for (const key in updatedValidities) {\n                const keyValue = key.replace('Validity', '');\n                formIsValid = (formIsValid && updatedValidities[key] && updateValues[keyValue])\n            }\n            return {\n                inputValidities: updatedValidities,\n                inputErrors: updateErrors,\n                formValid: formIsValid,\n                inputValues: updateValues,\n            };\n        case'RESET':\n            return initialFormValueState;\n        default:\n            break;\n    }\n};","import PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\nimport React from \"react\";\nimport {reducerForForm} from \"../utils/formHelper\"\n\n/**\n * initial state of form elements\n * @type {{inputValidities: {nameValidity: boolean, aboutValidity: boolean}, inputErrors: {nameError: string, aboutError: string}, formValid: boolean, inputValues: {name: string, about: string}}}\n */\nconst initialFormValueState = {\n    inputValues: {\n        name: '',\n        about:'',\n    },\n  inputValidities: {\n       nameValidity: true,\n       aboutValidity: true,\n   },\n    inputErrors: {\n      nameError: '',\n        aboutError: '',\n    },\n    formValid: false,\n}\n\n/**\n * reducer for a form\n * @param state\n * @param action\n * @returns {function} handler for reducer\n */\nfunction reducerForEditProfileForms(state, action) {\n    /**\n     * setting initial values from context\n     */\n    Object.assign(initialFormValueState.inputValues, action.currentUser);\n    return reducerForForm(state, action, initialFormValueState);\n}\n\n\n/**\n * modal window for editing profile info\n * @param {object} props\n * @param {function} props.onClose handles popup close\n * @param {function} props.onUpdateUser handles user info update\n * @param {function} props.isSubmitting handles form submit\n * @returns {JSX.Element}\n * @constructor\n */\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser, isSubmitting}) {\n    /**\n     * current user context\n     * @type {object}\n     */\n    const currentUserValue = React.useContext(CurrentUserContext);\n\n    /**\n     * reducer hook for form elements\n     */\n    const [formState, dispatchForm] = React.useReducer(reducerForEditProfileForms, initialFormValueState);\n\n    /**\n     * destructured values for form elements\n     */\n    const {nameValidity, aboutValidity} = formState.inputValidities;\n    const {nameError, aboutError} = formState.inputErrors;\n    const {name, about} = formState.inputValues;\n    const buttonState = formState.formValid;\n\n    /**\n     * submit handler\n     * @param e\n     */\n    const handleSubmit = e => {\n        e.preventDefault();\n            onUpdateUser({\n            name,\n            about: about,\n        });\n            e.target.reset();\n    };\n\n    /**\n     * change input handler\n     * @param e\n     */\n    const handleChange = e => {\n        /**\n         * dispatching form with a certain action type\n         */\n        dispatchForm({\n            type: 'DISPATCH',\n            field: e.target.name,\n            value: e.target,\n            currentUser: currentUserValue,\n        })\n    };\n    /**\n     * hook for setting initial values\n     */\n    React.useEffect(() => {\n        /**\n         * reseting form with a certain action type\n         */\n        dispatchForm({\n            type:'RESET',\n            currentUser: currentUserValue,\n        })\n    }, [isOpen,currentUserValue]);\n\n\n    return (\n        <PopupWithForm name={'edit-profile'} title={'Редактировать Профиль'}\n                       buttonTitle={'Cохранить'}\n                       isOpen={isOpen}\n                       onClose={onClose}\n                       onSubmit={handleSubmit}\n                       renderSubmitAnimation={isSubmitting}\n                       isDisabled={buttonState}\n        >\n            <label className=\"popup__form-label\">\n                <input className={`popup__input ${nameValidity ? null : 'popup__input_type_error'}`}\n                       id=\"title\"\n                       name=\"name\"\n                       type=\"text\"\n                       placeholder=\"ФИО\"\n                       minLength=\"2\"\n                       maxLength=\"20\"\n                       pattern=\"[a-zA-ZА-ЯЁа-яё\\s\\-]+\"\n                       required\n                       value={name}\n                       onChange={(e) => {\n                           handleChange(e)\n                       }}\n                       />\n                <span className={`popup__input-error`}  id=\"input-title-error\">{nameError}</span>\n            </label>\n            <label className=\"popup__form-label\">\n                <input className={`popup__input ${aboutValidity ? null : 'popup__input_type_error'}`}\n                       id=\"subtitle\"\n                       name=\"about\"\n                       type=\"text\"\n                       placeholder=\"Профессия\"\n                       minLength=\"2\"\n                       maxLength=\"200\"\n                       pattern=\"^[^\\s\\-].+[^\\s']$\"\n                       value={about}\n                       onChange={ (e) => {\n                           handleChange(e)\n                       }}\n                        required/>\n                <span className=\"popup__input-error\" id=\"input-subtitle-error\">{aboutError}</span>\n            </label>\n        </PopupWithForm>\n    );\n}\n\nexport default EditProfilePopup;","import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\n/**\n * @param {object} props\n * @param {boolean} props.isOpen\n * @param {function} props.onClose close popup\n * @param {function} props.onUpdateAvatar handles avatar update\n * @param {boolean} props.isSubmitting checks if user submitting a form to trigger animation\n * @returns {JSX.Element}\n */\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar, isSubmitting}) {\n    /**\n     * ref for avatar input\n     * @type {React.MutableRefObject<undefined>}\n     */\n    const avatarInput = React.useRef();\n    /**\n     * avatar input form state\n     */\n    const [avatarValidity, setAvatarValidity] = React.useState(true)\n    const [isDisabled, setDisable] = React.useState(false);\n    const [avatarErrorMessage, setAvatarErrorMessage] = React.useState('');\n\n    /**\n     * submit hanlder\n     * @param e\n     */\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        onUpdateAvatar({\n            avatar: avatarInput.current.value,\n        });\n        e.target.reset();\n    }\n\n    /**\n     * change handler\n     */\n    const handleChange = () => {\n        const {validity, validationMessage} = avatarInput.current\n        setAvatarValidity(validity.valid);\n        setAvatarErrorMessage(validationMessage);\n        setDisable(validity.valid);\n     };\n\n    /**\n     * reseting form on close\n     */\n    React.useEffect(() => {\n         setAvatarValidity(true);\n         setDisable(false);\n         setAvatarErrorMessage('')\n         avatarInput.current.value = '';\n    },[isOpen])\n\n    return (\n        <PopupWithForm name={'edit-avatar'}\n                       title={'Обновить Аватар'}\n                       buttonTitle={'Сохранить'}\n                       isOpen={isOpen}\n                       onClose={onClose}\n                       onSubmit={(e) => {\n                           handleSubmit(e);\n                       }}\n                       renderSubmitAnimation={isSubmitting}\n                       isDisabled={isDisabled}\n        >\n            <label className=\"popup__form-label\">\n                <input ref={avatarInput}\n                       className={\n                           `popup__input ${avatarValidity ? null : 'popup__input_type_error'}`\n                       }\n                       id=\"input-title\"\n                       name=\"avatar\"\n                       type=\"url\"\n                       placeholder=\"Ссылка на картинку\"\n                       required\n                       onChange={handleChange}\n                />\n                <span className=\"popup__input-error\" id=\"input-title-error\">{avatarErrorMessage}</span>\n            </label>\n        </PopupWithForm>\n    );\n}\n\nexport default EditAvatarPopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport {reducerForForm} from '../utils/formHelper'\n\n/**\n * initial state of the form elements\n * @type {{inputValidities: {linkValidity: boolean, nameValidity: boolean}, inputErrors: {nameError: string, linkError: string}, formValid: boolean, inputValues: {name: string, link: string}}}\n */\nconst initialFormValueState = {\n    inputValues: {\n        name:'',\n        link: '',\n    },\n    inputValidities: {\n        nameValidity: true,\n        linkValidity: true,\n    },\n    inputErrors: {\n        nameError: '',\n        linkError: '',\n    },\n    formValid: false,\n}\n\nconst reducerForAddPlaceForm = (state, action) => {\n        return reducerForForm(state, action, initialFormValueState);\n}\n\n\n/**\n * modal window for adding place\n * @param {object} props\n * @param {function} props.onClose handles popup close\n * @param {function} props.onAddPlace handles add place\n * @param {function} props.isSubmitting handles form submit\n * @returns {JSX.Element}\n * @constructor\n */\nfunction AddPlacePopup({isOpen, onClose, onAddPlace, isSubmitting}) {\n    /**\n     * reducer hook for form elemnts\n     */\n    const [formState, dispatchForm] = React.useReducer(reducerForAddPlaceForm, initialFormValueState);\n\n    /**\n     * destructured values for form elements\n     */\n    const {name, link} = formState.inputValues;\n    const buttonDisabled = formState.formValid;\n    const {nameValidity, linkValidity} = formState.inputValidities;\n    const {nameError, linkError} = formState.inputErrors;\n\n    /**\n     * hadnler for form submit\n     * @param e\n     */\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        onAddPlace({\n            name,\n            link,\n        })\n        e.target.reset();\n    }\n\n    /**\n     * handler for change inputs\n     * @param e\n     */\n    const handleChange = (e) => {\n        dispatchForm({\n            type: 'DISPATCH',\n            field: e.target.name,\n            value: e.target,\n        })\n    }\n\n    /**\n     * hook for form reset\n     */\n    React.useEffect( () => {\n        dispatchForm({\n            type:'RESET',\n        })\n    },[isOpen])\n\n    return (\n        <PopupWithForm name={'add-card'}\n                       title={'Новое Место'}\n                       buttonTitle={'Создать'}\n                       isOpen={isOpen}\n                       onClose={onClose}\n                       onSubmit={handleSubmit}\n                       renderSubmitAnimation={isSubmitting}\n                       isDisabled={buttonDisabled}\n        >\n            <label className=\"popup__form-label\">\n                <input className={`popup__input ${nameValidity ? null : 'popup__input_type_error'}`}\n                       id=\"input-title\"\n                       name=\"name\"\n                       type=\"text\"\n                       placeholder=\"Название\"\n                       minLength=\"2\"\n                       maxLength=\"30\"\n                       required\n                       value={name}\n                       onChange={handleChange}\n                />\n                <span className=\"popup__input-error\" id=\"input-title-error\">{nameError}</span>\n            </label>\n            <label className=\"popup__form-label\">\n                <input className={`popup__input ${linkValidity ? null : 'popup__input_type_error'}`}\n                       id=\"input-subtitle\"\n                       name=\"link\"\n                       type=\"url\"\n                       placeholder=\"Ссылка на картинку\"\n                       required\n                       value={link}\n                       onChange={handleChange}\n                />\n                <span className={`popup__input-error`}\n                      id=\"input-subtitle-error\">{linkError}</span>\n            </label>\n        </PopupWithForm>\n    );\n}\n\nexport default AddPlacePopup;","import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\n/**\n * modal window for card delete\n * @param {object} props\n * @param {function} props.onClose handles popup close\n * @param {function} props.onDeleteSubmit handles delete\n * @param {boolean} props.isSubmitting checks if user submitting to set an animation\n * @param {object} props.card card element\n * @returns {JSX.Element}\n * @constructor\n */\n\nfunction ConfirmDeletePopup({isOpen, onClose, onDeleteSubmit, card, isSubmitting}) {\n\n    const handleDeleteSubmit = (e) => {\n        e.preventDefault();\n        onDeleteSubmit(card);\n    }\n\n    return (\n        <PopupWithForm name={'popup-delete'}\n                       title={'Вы уверены?'}\n                       buttonTitle={'Да'}\n                       isOpen={isOpen}\n                       onClose={onClose}\n                       onSubmit={handleDeleteSubmit}\n                       renderSubmitAnimation={isSubmitting}\n                       isDisabled={true}\n        />\n    );\n}\n\nexport default ConfirmDeletePopup;","import React from 'react';\n\n/**\n * spinner component for loading sreen\n * @return {JSX.Element}\n * @constructor\n */\nfunction Spinner() {\n    return (\n        <div className=\"spinner\">Loading...</div>\n    );\n}\n\nexport default Spinner;","/**\n * paths for requests\n * @type {{userInfo: string, cards: string, avatar: string, likes: string}}\n */\nexport const urlPath = {\n  userInfo: 'users/me/',\n  cards: 'cards/',\n  avatar: 'avatar',\n  likes: 'likes/',\n}\n/**\n * url for mesto api requests\n * @type {string}\n */\nexport const baseUrl = 'https://mesto.nomoreparties.co/v1/cohort-12/';\n\n/**\n *  headers with authorisation token\n * @type {{authorization: string, \"Content-Type\": string}}\n */\nexport const headers = {\n  authorization: 'd2854785-f942-4a21-9d80-03fbc6fb281b',\n      'Content-Type': 'application/json',\n};\n\n/**\n * base url for giphy api\n * @type {string}\n */\nexport const giphyUrl = `https://api.giphy.com/v1/gifs/random?tag=dogs&rating=g&api_key=xZXsHMfcYYAZ8rEhdSEGmIGqudaSbeg7`","import {giphyUrl} from \"./constants\";\n\n/**\n * class for giphy api\n * @param {string} baseUrl\n */\nclass GiphyApi {\n    constructor({baseUrl}) {\n        this._url = baseUrl;\n    }\n\n    /**\n     * fetch random gif\n     * @return {Promise<Response>}\n     */\n    fetchData() {\n        return fetch(`${this._url}`).then(res => {\n            if (res.ok) {\n                return res.json()\n            }\n            return Promise.reject(new Error(`Ошибка: ${res.status}`))\n        })\n    }\n\n}\n\nexport const giphy = new GiphyApi({\n    baseUrl: giphyUrl,\n})","import React from 'react';\nimport {Link} from \"react-router-dom\";\nimport {giphy} from '../utils/GiphyApi';\n\nfunction Page404() {\n    /**\n     * state for gif src\n     */\n    const [gif, setGif] = React.useState('');\n\n    /**\n     * request for a random gif\n     */\n    const randomGifRequest = () =>  {\n        giphy.fetchData()\n            .then((res) => {\n                setGif(res.data.embed_url);\n            }).catch((err) => {\n            console.log(err)\n        })\n    }\n\n\n    /**\n     * request for a random gif on loading\n     */\n    React.useEffect(() => {\n        randomGifRequest();\n    },[])\n\n\n    return (\n        <div className='page404'>\n        <h1 className='page404__title'>404</h1>\n        <p className='page404__subtitle'>Здесь можно немного отдохнуть</p>\n            <div className='page404__coub-wrap'>\n                <iframe className='page404__gif' title='random gif' src={gif} allowFullScreen/>\n            </div>\n\n<div className='page404__button-container'>\n    <Link to='/' className='page404__button'>Вернуться на Mesto</Link>\n    <button className='page404__button'  onClick={randomGifRequest}>Позалипать на собачек</button>\n</div>\n\n            </div>\n    )\n}\n\nexport default Page404;","import  {urlPath, baseUrl, headers} from './constants';\n\n/**\n *  Api for mesto\n *  @param {string} baseUrl\n *  @param {object} headers\n */\n class Api {\n    constructor({baseUrl, headers}) {\n        this._url = baseUrl;\n        this._headers = headers;\n    }\n\n    /**\n     * Basic method for fetching data\n     * @param path {string} - path for an api request\n     * @param params {Object} - object with headers, methods and body\n     * @returns {Promise<Response>} - returns promise if request is successful\n     */\n    _fetchData(path, params) {\n        return fetch(`${this._url}${path}`, params).then(res => {\n            if (res.ok) {\n                return res.json()\n            }\n           return Promise.reject(new Error(`Ошибка: ${res.status}`))\n        })\n    }\n\n    /**\n     * Get User info\n     * @returns {Promise<Response>} - object with user info\n     */\n    getUserInfo() {\n        return this._fetchData(urlPath.userInfo, {headers: this._headers})\n    }\n\n    /**\n     * update user info\n     * @param {object} data\n     * @return {Promise<Response>}\n     */\n    updateUserInfo(data) {\n        return this._fetchData(urlPath.userInfo, {\n            headers: this._headers,\n            method: 'PATCH',\n            body: JSON.stringify(data),\n        })\n    }\n\n    /**\n     * update user avatar\n     * @param {object} data\n     * @return {Promise<Response>}\n     */\n    updateUserAvatar(data) {\n        return this._fetchData(`${urlPath.userInfo}${urlPath.avatar}`, {\n            headers: this._headers,\n            method: 'PATCH',\n            body: JSON.stringify(data),\n        })\n    }\n\n    /**\n     * Gets initial cards\n     * @returns {Promise<Response>} - array of objects with cards info\n     */\n    getInitialCards() {\n        return this._fetchData(urlPath.cards, {headers: this._headers})\n    }\n\n    /**\n     * post new card\n     * @param {object} data\n     * @return {Promise<Response>}\n     */\n    postNewCard(data) {\n        return this._fetchData(urlPath.cards, {\n            headers: this._headers,\n            method: 'POST',\n            body: JSON.stringify(data)\n        })\n    }\n\n    /**\n     * delete card\n     * @param {string} card id\n     * @return {Promise<Response>}\n     */\n    deleteCard(id) {\n        return this._fetchData(`${urlPath.cards}${id}`, {\n            method: 'DELETE',\n            headers: this._headers,\n        });\n    }\n\n    /**\n     * set like\n     * @param {string} id card id\n     * @param {boolean} isLiked\n     * @return {Promise<Response>}\n     */\n    setLike(id, isLiked) {\n        let method;\n        if (isLiked) {\n            method = 'DELETE';\n        } else {\n            method = 'PUT';\n        }\n        return this._fetchData(`${urlPath.cards}${urlPath.likes}${id}`, {\n            method: method,\n            headers: this._headers,\n        });\n    }\n}\n\n\nexport const api = new Api({baseUrl, headers});\n","import React, {useCallback} from 'react';\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\nimport '../index.css';\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup\";\nimport Spinner from \"./Spinner\";\nimport Page404 from \"./Page404\";\nimport {api} from \"../utils/Api\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\n/**\n * Create an app from the components\n * @returns {JSX.Element} - HTML-markup\n */\nfunction App() {\n    /**\n     * Current User State\n     */\n    const [currentUser, setUserInfo] = React.useState({\n        name:'',\n        avatar:'',\n        about:'',\n        _id:'',\n    });\n    /**\n     * Cards state\n     */\n    const [cards, setCards] = React.useState([]);\n\n/**\nState for waiting while loading data\n */\nconst [isSubmitting, setSubmiting] = React.useState(false);\nconst [isLoading, setLoading] = React.useState(false);\n\n    /**\n     * Popup with form states\n     */\n    const [isEditProfileOpen, setEditProfilePopup] = React.useState(false);\n    const [isAddPlacePopupOpen, setAddPlacePopup] = React.useState(false);\n    const [isEditAvatarPopupOpen, setEditAvatarPopup] = React.useState(false);\n    const [isDeletePopupOpen, setDeletePopup] = React.useState(false);\n\n    /**\n     * Popup with image state\n     */\n    const [selectedCard, setSelectedCardPopup] = React.useState(undefined);\n    const [selectedDeleteCard, setSelectedCard] = React.useState(undefined);\n\n    /**\n     * handler for Esc key\n     */\n    const handleEsc = useCallback((e) => {\n        if(e.key === \"Escape\") {\n            closeAllPopups();\n        }\n    },[]);\n\n    /**\n     * array of popup state\n     * @type {[boolean|object]}\n     */\n    const popupStates = [isEditProfileOpen,isAddPlacePopupOpen,isEditAvatarPopupOpen,isDeletePopupOpen, selectedCard];\n\n    /**\n     * mounts/unmounts eventListener for Escape key\n     */\n    React.useEffect( () => {\n      if(popupStates.some((el) => el === true || (typeof el  === 'object'))) {\n          window.addEventListener(\"keyup\", handleEsc);\n      } else {\n          window.removeEventListener(\"keyup\", handleEsc)\n      }\n    },[handleEsc, popupStates])\n\n    /**\n     * Set current user values and initial cards\n     */\n    React.useEffect( () => {\n        setLoading(true)\n        Promise.all([api.getUserInfo(), api.getInitialCards()]).then(([userData, initialCards]) => {\n            setUserInfo(userData);\n            setCards(initialCards);\n            setLoading(false);\n        }).catch((err) => {\n        console.log(err);\n        })\n    }, [])\n\n    /**\n     *  handles user click on a card\n     * @param {Object} card - card object that corresponds to a card that user clicked on\n     */\n    const handleCardClick = card => {\n        setSelectedCardPopup(card);\n    };\n    /**\n     * handles user click on avatar\n     */\n    const handleEditAvatarClick = () => {\n       setEditAvatarPopup(true);\n    };\n    /**\n     * handles user click on profile edit button\n     */\n    const handleEditProfileClick = () => {\n    setEditProfilePopup(true);\n  };\n\n    /**\n     * handles user click on add place button\n     */\n    const handleAddPlaceClick = () => {\n    setAddPlacePopup(true);\n  };\n\n  const handleDeletePopupClick = (card) => {\n      setDeletePopup(true);\n      setSelectedCard(card);\n\n  }\n\n        /**\n    * closes all popups\n    */\n\n\n\n  const closeAllPopups  = () => {\n      setAddPlacePopup(false);\n      setEditAvatarPopup(false);\n      setEditProfilePopup(false);\n      setSelectedCardPopup(undefined);\n      setDeletePopup(false)\n  }\n\n    /**\n     * update user info\n     * @param data {object}\n     */\n\n  const handleUpdateUser = (data) => {\n      setSubmiting(true);\n      api.updateUserInfo(data).then((result) => {\n          setUserInfo(result);\n          closeAllPopups();\n          setSubmiting(false);\n      }).catch((err) => {\n          console.log(err)\n      })\n    }\n\n    /**\n     * update user avatar\n     * @param data {object}\n     */\n\n    const handleUpdateAvatar = (data) => {\n        setSubmiting(true);\n      api.updateUserAvatar(data).then((result) => {\n          setUserInfo(result);\n          closeAllPopups();\n          setSubmiting(false);\n      }).catch((err) => {\n          console.log(err)\n      })\n    }\n\n    /**\n     * handle card likes\n     * @param card {object}\n     */\n    const handleCardLike = (card) => {\n        const isLiked = card.likes.some((i) => i._id === currentUser._id);\n        api.setLike(card._id, isLiked).then((newCard) => {\n            const newCards = cards.map((c) => {\n                return c._id === card._id ? newCard : c;\n            });\n            setCards(newCards);\n        }).catch((err) => {\n            console.log(err)\n        })\n    };\n\n    /**\n     * handle card delete\n     * @param card {object}\n     */\n\n    const handleDeleteCard = (card) => {\n        setSubmiting(true);\n        api.deleteCard(card._id).then(() => {\n            const newCards = cards.filter(i => i._id !== card._id);\n            setCards(newCards);\n            closeAllPopups();\n            setSubmiting(false);\n        }).catch((err) => {\n            console.log(err);\n        })\n    }\n\n    /**\n     * handle add card\n     * @param data {object}\n     */\n    const handleAddPlaceSubmit = (data) => {\n        setSubmiting(true);\n        api.postNewCard(data).then((newCard) => {\n            setCards([newCard,...cards]);\n            closeAllPopups();\n            setSubmiting(false);\n        }).catch((err) => {\n            console.log(err)\n        })\n    }\n\n\n\n  return (\n      <BrowserRouter>\n      <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header/>\n        <Switch>\n            <Route exact path={'/'}>\n          {isLoading ? <Spinner/> : <Main onAddPlace={handleAddPlaceClick}\n              onEditProfile={handleEditProfileClick}\n              onEditAvatar={handleEditAvatarClick}\n              cardClick={handleCardClick}\n              cards={cards}\n              onCardDelete={handleDeleteCard}\n              onCardLike={handleCardLike}\n              onDeletePopup={handleDeletePopupClick}\n              />}\n            </Route>\n            <Route path={'*'}>\n                <Page404/>\n            </Route>\n        </Switch>\n\n        <Footer/>\n\n          <ConfirmDeletePopup\n              isOpen={isDeletePopupOpen}\n              onClose={closeAllPopups}\n            onDeleteSubmit={handleDeleteCard}\n              card={selectedDeleteCard}\n              isSubmitting={isSubmitting}\n          />\n\n      <EditProfilePopup isOpen={isEditProfileOpen}\n                        onClose={closeAllPopups}\n                        onUpdateUser={handleUpdateUser}\n                        isSubmitting={isSubmitting}\n\n      />\n\n      <EditAvatarPopup isOpen={isEditAvatarPopupOpen}\n                       onClose={closeAllPopups}\n                       onUpdateAvatar={handleUpdateAvatar}\n                       isSubmitting={isSubmitting}\n\n      />\n\n      <AddPlacePopup isOpen={isAddPlacePopupOpen}\n                     onClose={closeAllPopups}\n                     onAddPlace={handleAddPlaceSubmit}\n                     isSubmitting={isSubmitting}\n      />\n\n\n          <ImagePopup card={selectedCard}\n                      onClose={closeAllPopups}\n          />\n\n      </div>\n      </CurrentUserContext.Provider>\n      </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}